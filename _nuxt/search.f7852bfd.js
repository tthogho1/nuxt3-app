import{u as Xr,_ as zr,g as Qr}from"./getWebCams.1ae5b691.js";import{I as tn,a as en,r as yt,J as rn,K as Me,o as At,f as Ot,h as nn,j as R,q as on,L as sn,F as ae,k as Pe,u as an,t as Pt,E as fn,G as un,M as cn}from"./entry.3de234bc.js";import{webCamQuery as fe}from"./webCam.40b56a92.js";import"./nuxt-link.0da6c94e.js";function hn(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ln=mn,pn=xn,dn=En,rt=[],Z=[],yn=typeof Uint8Array<"u"?Uint8Array:Array,ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var gt=0,gn=ue.length;gt<gn;++gt)rt[gt]=ue[gt],Z[ue.charCodeAt(gt)]=gt;Z["-".charCodeAt(0)]=62;Z["_".charCodeAt(0)]=63;function mr(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var o=r===t?0:4-r%4;return[r,o]}function mn(e){var t=mr(e),r=t[0],o=t[1];return(r+o)*3/4-o}function wn(e,t,r){return(t+r)*3/4-r}function xn(e){var t,r=mr(e),o=r[0],f=r[1],u=new yn(wn(e,o,f)),s=0,l=f>0?o-4:o,p;for(p=0;p<l;p+=4)t=Z[e.charCodeAt(p)]<<18|Z[e.charCodeAt(p+1)]<<12|Z[e.charCodeAt(p+2)]<<6|Z[e.charCodeAt(p+3)],u[s++]=t>>16&255,u[s++]=t>>8&255,u[s++]=t&255;return f===2&&(t=Z[e.charCodeAt(p)]<<2|Z[e.charCodeAt(p+1)]>>4,u[s++]=t&255),f===1&&(t=Z[e.charCodeAt(p)]<<10|Z[e.charCodeAt(p+1)]<<4|Z[e.charCodeAt(p+2)]>>2,u[s++]=t>>8&255,u[s++]=t&255),u}function bn(e){return rt[e>>18&63]+rt[e>>12&63]+rt[e>>6&63]+rt[e&63]}function vn(e,t,r){for(var o,f=[],u=t;u<r;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(e[u+2]&255),f.push(bn(o));return f.join("")}function En(e){for(var t,r=e.length,o=r%3,f=[],u=16383,s=0,l=r-o;s<l;s+=u)f.push(vn(e,s,s+u>l?l:s+u));return o===1?(t=e[r-1],f.push(rt[t>>2]+rt[t<<4&63]+"==")):o===2&&(t=(e[r-2]<<8)+e[r-1],f.push(rt[t>>10]+rt[t>>4&63]+rt[t<<2&63]+"=")),f.join("")}var ce={byteLength:ln,toByteArray:pn,fromByteArray:dn};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var _n=function(t,r,o,f,u){var s,l,p=u*8-f-1,w=(1<<p)-1,m=w>>1,g=-7,b=o?u-1:0,_=o?-1:1,E=t[r+b];for(b+=_,s=E&(1<<-g)-1,E>>=-g,g+=p;g>0;s=s*256+t[r+b],b+=_,g-=8);for(l=s&(1<<-g)-1,s>>=-g,g+=f;g>0;l=l*256+t[r+b],b+=_,g-=8);if(s===0)s=1-m;else{if(s===w)return l?NaN:(E?-1:1)*(1/0);l=l+Math.pow(2,f),s=s-m}return(E?-1:1)*l*Math.pow(2,s-f)},Sn=function(t,r,o,f,u,s){var l,p,w,m=s*8-u-1,g=(1<<m)-1,b=g>>1,_=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=f?0:s-1,S=f?1:-1,D=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(p=isNaN(r)?1:0,l=g):(l=Math.floor(Math.log(r)/Math.LN2),r*(w=Math.pow(2,-l))<1&&(l--,w*=2),l+b>=1?r+=_/w:r+=_*Math.pow(2,1-b),r*w>=2&&(l++,w/=2),l+b>=g?(p=0,l=g):l+b>=1?(p=(r*w-1)*Math.pow(2,u),l=l+b):(p=r*Math.pow(2,b-1)*Math.pow(2,u),l=0));u>=8;t[o+E]=p&255,E+=S,p/=256,u-=8);for(l=l<<u|p,m+=u;m>0;t[o+E]=l&255,E+=S,l/=256,m-=8);t[o+E-S]|=D*128},mt={read:_n,write:Sn},Xt=hn(function(e,t){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=k,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=f(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{var a=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(a,n),a.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function u(a){if(a>o)throw new RangeError('The value "'+a+'" is invalid for option "size"');var n=new Uint8Array(a);return Object.setPrototypeOf(n,s.prototype),n}function s(a,n,i){if(typeof a=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(a)}return l(a,n,i)}s.poolSize=8192;function l(a,n,i){if(typeof a=="string")return g(a,n);if(ArrayBuffer.isView(a))return _(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(a));if(tt(a,ArrayBuffer)||a&&tt(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(a,SharedArrayBuffer)||a&&tt(a.buffer,SharedArrayBuffer)))return E(a,n,i);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var c=a.valueOf&&a.valueOf();if(c!=null&&c!==a)return s.from(c,n,i);var h=S(a);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return s.from(a[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(a))}s.from=function(a,n,i){return l(a,n,i)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function p(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function w(a,n,i){return p(a),a<=0?u(a):n!==void 0?typeof i=="string"?u(a).fill(n,i):u(a).fill(n):u(a)}s.alloc=function(a,n,i){return w(a,n,i)};function m(a){return p(a),u(a<0?0:D(a)|0)}s.allocUnsafe=function(a){return m(a)},s.allocUnsafeSlow=function(a){return m(a)};function g(a,n){if((typeof n!="string"||n==="")&&(n="utf8"),!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i=F(a,n)|0,c=u(i),h=c.write(a,n);return h!==i&&(c=c.slice(0,h)),c}function b(a){for(var n=a.length<0?0:D(a.length)|0,i=u(n),c=0;c<n;c+=1)i[c]=a[c]&255;return i}function _(a){if(tt(a,Uint8Array)){var n=new Uint8Array(a);return E(n.buffer,n.byteOffset,n.byteLength)}return b(a)}function E(a,n,i){if(n<0||a.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<n+(i||0))throw new RangeError('"length" is outside of buffer bounds');var c;return n===void 0&&i===void 0?c=new Uint8Array(a):i===void 0?c=new Uint8Array(a,n):c=new Uint8Array(a,n,i),Object.setPrototypeOf(c,s.prototype),c}function S(a){if(s.isBuffer(a)){var n=D(a.length)|0,i=u(n);return i.length===0||a.copy(i,0,0,n),i}if(a.length!==void 0)return typeof a.length!="number"||se(a.length)?u(0):b(a);if(a.type==="Buffer"&&Array.isArray(a.data))return b(a.data)}function D(a){if(a>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return a|0}function k(a){return+a!=a&&(a=0),s.alloc(+a)}s.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==s.prototype},s.compare=function(n,i){if(tt(n,Uint8Array)&&(n=s.from(n,n.offset,n.byteLength)),tt(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),!s.isBuffer(n)||!s.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===i)return 0;for(var c=n.length,h=i.length,d=0,y=Math.min(c,h);d<y;++d)if(n[d]!==i[d]){c=n[d],h=i[d];break}return c<h?-1:h<c?1:0},s.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(n,i){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return s.alloc(0);var c;if(i===void 0)for(i=0,c=0;c<n.length;++c)i+=n[c].length;var h=s.allocUnsafe(i),d=0;for(c=0;c<n.length;++c){var y=n[c];if(tt(y,Uint8Array))d+y.length>h.length?s.from(y).copy(h,d):Uint8Array.prototype.set.call(h,y,d);else if(s.isBuffer(y))y.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=y.length}return h};function F(a,n){if(s.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||tt(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(a));var i=a.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&i===0)return 0;for(var h=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return oe(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Ce(a).length;default:if(h)return c?-1:oe(a).length;n=(""+n).toLowerCase(),h=!0}}s.byteLength=F;function J(a,n,i){var c=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,n>>>=0,i<=n))return"";for(a||(a="utf8");;)switch(a){case"hex":return X(this,n,i);case"utf8":case"utf-8":return pt(this,n,i);case"ascii":return dt(this,n,i);case"latin1":case"binary":return C(this,n,i);case"base64":return lt(this,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,n,i);default:if(c)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),c=!0}}s.prototype._isBuffer=!0;function x(a,n,i){var c=a[n];a[n]=a[i],a[i]=c}s.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<n;i+=2)x(this,i,i+1);return this},s.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<n;i+=4)x(this,i,i+3),x(this,i+1,i+2);return this},s.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<n;i+=8)x(this,i,i+7),x(this,i+1,i+6),x(this,i+2,i+5),x(this,i+3,i+4);return this},s.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?pt(this,0,n):J.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(n){if(!s.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:s.compare(this,n)===0},s.prototype.inspect=function(){var n="",i=t.INSPECT_MAX_BYTES;return n=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(n+=" ... "),"<Buffer "+n+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(n,i,c,h,d){if(tt(n,Uint8Array)&&(n=s.from(n,n.offset,n.byteLength)),!s.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(n));if(i===void 0&&(i=0),c===void 0&&(c=n?n.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),i<0||c>n.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&i>=c)return 0;if(h>=d)return-1;if(i>=c)return 1;if(i>>>=0,c>>>=0,h>>>=0,d>>>=0,this===n)return 0;for(var y=d-h,A=c-i,B=Math.min(y,A),U=this.slice(h,d),V=n.slice(i,c),j=0;j<B;++j)if(U[j]!==V[j]){y=U[j],A=V[j];break}return y<A?-1:A<y?1:0};function O(a,n,i,c,h){if(a.length===0)return-1;if(typeof i=="string"?(c=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,se(i)&&(i=h?0:a.length-1),i<0&&(i=a.length+i),i>=a.length){if(h)return-1;i=a.length-1}else if(i<0)if(h)i=0;else return-1;if(typeof n=="string"&&(n=s.from(n,c)),s.isBuffer(n))return n.length===0?-1:M(a,n,i,c,h);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(a,n,i):Uint8Array.prototype.lastIndexOf.call(a,n,i):M(a,[n],i,c,h);throw new TypeError("val must be string, number or Buffer")}function M(a,n,i,c,h){var d=1,y=a.length,A=n.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(a.length<2||n.length<2)return-1;d=2,y/=2,A/=2,i/=2}function B(je,$e){return d===1?je[$e]:je.readUInt16BE($e*d)}var U;if(h){var V=-1;for(U=i;U<y;U++)if(B(a,U)===B(n,V===-1?0:U-V)){if(V===-1&&(V=U),U-V+1===A)return V*d}else V!==-1&&(U-=U-V),V=-1}else for(i+A>y&&(i=y-A),U=i;U>=0;U--){for(var j=!0,Mt=0;Mt<A;Mt++)if(B(a,U+Mt)!==B(n,Mt)){j=!1;break}if(j)return U}return-1}s.prototype.includes=function(n,i,c){return this.indexOf(n,i,c)!==-1},s.prototype.indexOf=function(n,i,c){return O(this,n,i,c,!0)},s.prototype.lastIndexOf=function(n,i,c){return O(this,n,i,c,!1)};function L(a,n,i,c){i=Number(i)||0;var h=a.length-i;c?(c=Number(c),c>h&&(c=h)):c=h;var d=n.length;c>d/2&&(c=d/2);for(var y=0;y<c;++y){var A=parseInt(n.substr(y*2,2),16);if(se(A))return y;a[i+y]=A}return y}function Dt(a,n,i,c){return $t(oe(n,a.length-i),a,i,c)}function Nt(a,n,i,c){return $t(Zr(n),a,i,c)}function ie(a,n,i,c){return $t(Ce(n),a,i,c)}function Ct(a,n,i,c){return $t(Yr(n,a.length-i),a,i,c)}s.prototype.write=function(n,i,c,h){if(i===void 0)h="utf8",c=this.length,i=0;else if(c===void 0&&typeof i=="string")h=i,c=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(c)?(c=c>>>0,h===void 0&&(h="utf8")):(h=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-i;if((c===void 0||c>d)&&(c=d),n.length>0&&(c<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var y=!1;;)switch(h){case"hex":return L(this,n,i,c);case"utf8":case"utf-8":return Dt(this,n,i,c);case"ascii":case"latin1":case"binary":return Nt(this,n,i,c);case"base64":return ie(this,n,i,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ct(this,n,i,c);default:if(y)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lt(a,n,i){return n===0&&i===a.length?ce.fromByteArray(a):ce.fromByteArray(a.slice(n,i))}function pt(a,n,i){i=Math.min(a.length,i);for(var c=[],h=n;h<i;){var d=a[h],y=null,A=d>239?4:d>223?3:d>191?2:1;if(h+A<=i){var B,U,V,j;switch(A){case 1:d<128&&(y=d);break;case 2:B=a[h+1],(B&192)===128&&(j=(d&31)<<6|B&63,j>127&&(y=j));break;case 3:B=a[h+1],U=a[h+2],(B&192)===128&&(U&192)===128&&(j=(d&15)<<12|(B&63)<<6|U&63,j>2047&&(j<55296||j>57343)&&(y=j));break;case 4:B=a[h+1],U=a[h+2],V=a[h+3],(B&192)===128&&(U&192)===128&&(V&192)===128&&(j=(d&15)<<18|(B&63)<<12|(U&63)<<6|V&63,j>65535&&j<1114112&&(y=j))}}y===null?(y=65533,A=1):y>65535&&(y-=65536,c.push(y>>>10&1023|55296),y=56320|y&1023),c.push(y),h+=A}return jt(c)}var it=4096;function jt(a){var n=a.length;if(n<=it)return String.fromCharCode.apply(String,a);for(var i="",c=0;c<n;)i+=String.fromCharCode.apply(String,a.slice(c,c+=it));return i}function dt(a,n,i){var c="";i=Math.min(a.length,i);for(var h=n;h<i;++h)c+=String.fromCharCode(a[h]&127);return c}function C(a,n,i){var c="";i=Math.min(a.length,i);for(var h=n;h<i;++h)c+=String.fromCharCode(a[h]);return c}function X(a,n,i){var c=a.length;(!n||n<0)&&(n=0),(!i||i<0||i>c)&&(i=c);for(var h="",d=n;d<i;++d)h+=Kr[a[d]];return h}function T(a,n,i){for(var c=a.slice(n,i),h="",d=0;d<c.length-1;d+=2)h+=String.fromCharCode(c[d]+c[d+1]*256);return h}s.prototype.slice=function(n,i){var c=this.length;n=~~n,i=i===void 0?c:~~i,n<0?(n+=c,n<0&&(n=0)):n>c&&(n=c),i<0?(i+=c,i<0&&(i=0)):i>c&&(i=c),i<n&&(i=n);var h=this.subarray(n,i);return Object.setPrototypeOf(h,s.prototype),h};function N(a,n,i){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+n>i)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=this[n],d=1,y=0;++y<i&&(d*=256);)h+=this[n+y]*d;return h},s.prototype.readUintBE=s.prototype.readUIntBE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=this[n+--i],d=1;i>0&&(d*=256);)h+=this[n+--i]*d;return h},s.prototype.readUint8=s.prototype.readUInt8=function(n,i){return n=n>>>0,i||N(n,1,this.length),this[n]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(n,i){return n=n>>>0,i||N(n,2,this.length),this[n]|this[n+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(n,i){return n=n>>>0,i||N(n,2,this.length),this[n]<<8|this[n+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(n,i){return n=n>>>0,i||N(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(n,i){return n=n>>>0,i||N(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},s.prototype.readIntLE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=this[n],d=1,y=0;++y<i&&(d*=256);)h+=this[n+y]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*i)),h},s.prototype.readIntBE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=i,d=1,y=this[n+--h];h>0&&(d*=256);)y+=this[n+--h]*d;return d*=128,y>=d&&(y-=Math.pow(2,8*i)),y},s.prototype.readInt8=function(n,i){return n=n>>>0,i||N(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},s.prototype.readInt16LE=function(n,i){n=n>>>0,i||N(n,2,this.length);var c=this[n]|this[n+1]<<8;return c&32768?c|4294901760:c},s.prototype.readInt16BE=function(n,i){n=n>>>0,i||N(n,2,this.length);var c=this[n+1]|this[n]<<8;return c&32768?c|4294901760:c},s.prototype.readInt32LE=function(n,i){return n=n>>>0,i||N(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},s.prototype.readInt32BE=function(n,i){return n=n>>>0,i||N(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},s.prototype.readFloatLE=function(n,i){return n=n>>>0,i||N(n,4,this.length),mt.read(this,n,!0,23,4)},s.prototype.readFloatBE=function(n,i){return n=n>>>0,i||N(n,4,this.length),mt.read(this,n,!1,23,4)},s.prototype.readDoubleLE=function(n,i){return n=n>>>0,i||N(n,8,this.length),mt.read(this,n,!0,52,8)},s.prototype.readDoubleBE=function(n,i){return n=n>>>0,i||N(n,8,this.length),mt.read(this,n,!1,52,8)};function H(a,n,i,c,h,d){if(!s.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>h||n<d)throw new RangeError('"value" argument is out of bounds');if(i+c>a.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(n,i,c,h){if(n=+n,i=i>>>0,c=c>>>0,!h){var d=Math.pow(2,8*c)-1;H(this,n,i,c,d,0)}var y=1,A=0;for(this[i]=n&255;++A<c&&(y*=256);)this[i+A]=n/y&255;return i+c},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(n,i,c,h){if(n=+n,i=i>>>0,c=c>>>0,!h){var d=Math.pow(2,8*c)-1;H(this,n,i,c,d,0)}var y=c-1,A=1;for(this[i+y]=n&255;--y>=0&&(A*=256);)this[i+y]=n/A&255;return i+c},s.prototype.writeUint8=s.prototype.writeUInt8=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,1,255,0),this[i]=n&255,i+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,2,65535,0),this[i]=n&255,this[i+1]=n>>>8,i+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,2,65535,0),this[i]=n>>>8,this[i+1]=n&255,i+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,4,4294967295,0),this[i+3]=n>>>24,this[i+2]=n>>>16,this[i+1]=n>>>8,this[i]=n&255,i+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,4,4294967295,0),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4},s.prototype.writeIntLE=function(n,i,c,h){if(n=+n,i=i>>>0,!h){var d=Math.pow(2,8*c-1);H(this,n,i,c,d-1,-d)}var y=0,A=1,B=0;for(this[i]=n&255;++y<c&&(A*=256);)n<0&&B===0&&this[i+y-1]!==0&&(B=1),this[i+y]=(n/A>>0)-B&255;return i+c},s.prototype.writeIntBE=function(n,i,c,h){if(n=+n,i=i>>>0,!h){var d=Math.pow(2,8*c-1);H(this,n,i,c,d-1,-d)}var y=c-1,A=1,B=0;for(this[i+y]=n&255;--y>=0&&(A*=256);)n<0&&B===0&&this[i+y+1]!==0&&(B=1),this[i+y]=(n/A>>0)-B&255;return i+c},s.prototype.writeInt8=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,1,127,-128),n<0&&(n=255+n+1),this[i]=n&255,i+1},s.prototype.writeInt16LE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,2,32767,-32768),this[i]=n&255,this[i+1]=n>>>8,i+2},s.prototype.writeInt16BE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,2,32767,-32768),this[i]=n>>>8,this[i+1]=n&255,i+2},s.prototype.writeInt32LE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,4,2147483647,-2147483648),this[i]=n&255,this[i+1]=n>>>8,this[i+2]=n>>>16,this[i+3]=n>>>24,i+4},s.prototype.writeInt32BE=function(n,i,c){return n=+n,i=i>>>0,c||H(this,n,i,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4};function Fe(a,n,i,c,h,d){if(i+c>a.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Le(a,n,i,c,h){return n=+n,i=i>>>0,h||Fe(a,n,i,4),mt.write(a,n,i,c,23,4),i+4}s.prototype.writeFloatLE=function(n,i,c){return Le(this,n,i,!0,c)},s.prototype.writeFloatBE=function(n,i,c){return Le(this,n,i,!1,c)};function De(a,n,i,c,h){return n=+n,i=i>>>0,h||Fe(a,n,i,8),mt.write(a,n,i,c,52,8),i+8}s.prototype.writeDoubleLE=function(n,i,c){return De(this,n,i,!0,c)},s.prototype.writeDoubleBE=function(n,i,c){return De(this,n,i,!1,c)},s.prototype.copy=function(n,i,c,h){if(!s.isBuffer(n))throw new TypeError("argument should be a Buffer");if(c||(c=0),!h&&h!==0&&(h=this.length),i>=n.length&&(i=n.length),i||(i=0),h>0&&h<c&&(h=c),h===c||n.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),n.length-i<h-c&&(h=n.length-i+c);var d=h-c;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,c,h):Uint8Array.prototype.set.call(n,this.subarray(c,h),i),d},s.prototype.fill=function(n,i,c,h){if(typeof n=="string"){if(typeof i=="string"?(h=i,i=0,c=this.length):typeof c=="string"&&(h=c,c=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!s.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(n.length===1){var d=n.charCodeAt(0);(h==="utf8"&&d<128||h==="latin1")&&(n=d)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(i<0||this.length<i||this.length<c)throw new RangeError("Out of range index");if(c<=i)return this;i=i>>>0,c=c===void 0?this.length:c>>>0,n||(n=0);var y;if(typeof n=="number")for(y=i;y<c;++y)this[y]=n;else{var A=s.isBuffer(n)?n:s.from(n,h),B=A.length;if(B===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(y=0;y<c-i;++y)this[y+i]=A[y%B]}return this};var qr=/[^+/0-9A-Za-z-_]/g;function Gr(a){if(a=a.split("=")[0],a=a.trim().replace(qr,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function oe(a,n){n=n||1/0;for(var i,c=a.length,h=null,d=[],y=0;y<c;++y){if(i=a.charCodeAt(y),i>55295&&i<57344){if(!h){if(i>56319){(n-=3)>-1&&d.push(239,191,189);continue}else if(y+1===c){(n-=3)>-1&&d.push(239,191,189);continue}h=i;continue}if(i<56320){(n-=3)>-1&&d.push(239,191,189),h=i;continue}i=(h-55296<<10|i-56320)+65536}else h&&(n-=3)>-1&&d.push(239,191,189);if(h=null,i<128){if((n-=1)<0)break;d.push(i)}else if(i<2048){if((n-=2)<0)break;d.push(i>>6|192,i&63|128)}else if(i<65536){if((n-=3)<0)break;d.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((n-=4)<0)break;d.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return d}function Zr(a){for(var n=[],i=0;i<a.length;++i)n.push(a.charCodeAt(i)&255);return n}function Yr(a,n){for(var i,c,h,d=[],y=0;y<a.length&&!((n-=2)<0);++y)i=a.charCodeAt(y),c=i>>8,h=i%256,d.push(h),d.push(c);return d}function Ce(a){return ce.toByteArray(Gr(a))}function $t(a,n,i,c){for(var h=0;h<c&&!(h+i>=n.length||h>=a.length);++h)n[h+i]=a[h];return h}function tt(a,n){return a instanceof n||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===n.name}function se(a){return a!==a}var Kr=function(){for(var a="0123456789abcdef",n=new Array(256),i=0;i<16;++i)for(var c=i*16,h=0;h<16;++h)n[c+h]=a[i]+a[h];return n}()}),I=Xt.Buffer;Xt.SlowBuffer;Xt.INSPECT_MAX_BYTES;Xt.kMaxLength;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var be=function(t,r){return be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,f){o.__proto__=f}||function(o,f){for(var u in f)f.hasOwnProperty(u)&&(o[u]=f[u])},be(t,r)};function zt(e,t){be(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ut=function(e){zt(t,e);function t(r){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),t}(Error),$=function(e){zt(t,e);function t(r){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),t}(TypeError);function Jt(e){return e&&e.Math==Math&&e}function wr(){return Jt(typeof globalThis=="object"&&globalThis)||Jt(typeof window=="object"&&window)||Jt(typeof self=="object"&&self)||Jt(typeof global=="object"&&global)||Function("return this")()}function Nn(){var e=wr();return typeof e.navigator=="object"&&e.navigator.product==="ReactNative"}var An=function(t){var r=Nn()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var o=I.alloc(t),f=0;f<t;++f)o[f]=Math.floor(Math.random()*256);return o},On=function(){{if(typeof window<"u"){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(t){return e.getRandomValues(I.alloc(t))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(t){return globalThis.crypto.getRandomValues(I.alloc(t))}:An}},xr=On();function Tn(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}function Oe(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}function In(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Bn(e){return Ft(e)&&Object.prototype.toString.call(e)==="[object Date]"}function Ft(e){return typeof e=="object"&&e!==null}function Qt(e,t){var r=!1;function o(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return r||(console.warn(t),r=!0),e.apply(this,f)}return o}function Gt(e){if(ArrayBuffer.isView(e))return I.from(e.buffer,e.byteOffset,e.byteLength);if(Tn(e))return I.from(e);throw new $("Must use either Buffer or TypedArray")}var Un=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,br=function(e){return typeof e=="string"&&Un.test(e)},ve=function(e){if(!br(e))throw new $('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var t=e.replace(/-/g,"");return I.from(t,"hex")},Je=function(e,t){return t===void 0&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")},Rn=Math.pow(2,53),kn=-Math.pow(2,53),vr=4,ct=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=null&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!(t instanceof ArrayBuffer)&&!Array.isArray(t))throw new $("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??e.BSON_BINARY_SUBTYPE_DEFAULT,t==null?(this.buffer=I.alloc(e.BUFFER_SIZE),this.position=0):(typeof t=="string"?this.buffer=I.from(t,"binary"):Array.isArray(t)?this.buffer=I.from(t):this.buffer=Gt(t),this.position=this.buffer.byteLength)}return e.prototype.put=function(t){if(typeof t=="string"&&t.length!==1)throw new $("only accepts single character String");if(typeof t!="number"&&t.length!==1)throw new $("only accepts single character Uint8Array or Array");var r;if(typeof t=="string"?r=t.charCodeAt(0):typeof t=="number"?r=t:r=t[0],r<0||r>255)throw new $("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var o=I.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(o,0,0,this.buffer.length),this.buffer=o,this.buffer[this.position++]=r}},e.prototype.write=function(t,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+t.length){var o=I.alloc(this.buffer.length+t.length);this.buffer.copy(o,0,0,this.buffer.length),this.buffer=o}ArrayBuffer.isView(t)?(this.buffer.set(Gt(t),r),this.position=r+t.byteLength>this.position?r+t.length:this.position):typeof t=="string"&&(this.buffer.write(t,r,t.length,"binary"),this.position=r+t.length>this.position?r+t.length:this.position)},e.prototype.read=function(t,r){return r=r&&r>0?r:this.position,this.buffer.slice(t,t+r)},e.prototype.value=function(t){return t=!!t,t&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(t){return this.buffer.toString(t)},e.prototype.toExtendedJSON=function(t){t=t||{};var r=this.buffer.toString("base64"),o=Number(this.sub_type).toString(16);return t.legacy?{$binary:r,$type:o.length===1?"0"+o:o}:{$binary:{base64:r,subType:o.length===1?"0"+o:o}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new Ve(this.buffer.slice(0,this.position));throw new ut('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(e.SUBTYPE_UUID,'" is currently supported.'))},e.fromExtendedJSON=function(t,r){r=r||{};var o,f;if("$binary"in t?r.legacy&&typeof t.$binary=="string"&&"$type"in t?(f=t.$type?parseInt(t.$type,16):0,o=I.from(t.$binary,"base64")):typeof t.$binary!="string"&&(f=t.$binary.subType?parseInt(t.$binary.subType,16):0,o=I.from(t.$binary.base64,"base64")):"$uuid"in t&&(f=4,o=ve(t.$uuid)),!o)throw new $("Unexpected Binary Extended JSON format ".concat(JSON.stringify(t)));return f===vr?new Ve(o):new e(o,f)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_ENCRYPTED=6,e.SUBTYPE_COLUMN=7,e.SUBTYPE_USER_DEFINED=128,e}();Object.defineProperty(ct.prototype,"_bsontype",{value:"Binary"});var he=16,Ve=function(e){zt(t,e);function t(r){var o=this,f,u;if(r==null)f=t.generate();else if(r instanceof t)f=I.from(r.buffer),u=r.__id;else if(ArrayBuffer.isView(r)&&r.byteLength===he)f=Gt(r);else if(typeof r=="string")f=ve(r);else throw new $("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");return o=e.call(this,f,vr)||this,o.__id=u,o}return Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer},set:function(r){this.buffer=r,t.cacheHexString&&(this.__id=Je(r))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(r){if(r===void 0&&(r=!0),t.cacheHexString&&this.__id)return this.__id;var o=Je(this.id,r);return t.cacheHexString&&(this.__id=o),o},t.prototype.toString=function(r){return r?this.id.toString(r):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(r){if(!r)return!1;if(r instanceof t)return r.id.equals(this.id);try{return new t(r).id.equals(this.id)}catch{return!1}},t.prototype.toBinary=function(){return new ct(this.id,ct.SUBTYPE_UUID)},t.generate=function(){var r=xr(he);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,I.from(r)},t.isValid=function(r){return r?r instanceof t?!0:typeof r=="string"?br(r):Oe(r)?r.length!==he?!1:(r[6]&240)===64&&(r[8]&128)===128:!1:!1},t.createFromHexString=function(r){var o=ve(r);return new t(o)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},t}(ct),te=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.code=t,this.scope=r}return e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},e}();Object.defineProperty(te.prototype,"_bsontype",{value:"Code"});function Fn(e){return Ft(e)&&e.$id!=null&&typeof e.$ref=="string"&&(e.$db==null||typeof e.$db=="string")}var Bt=function(){function e(t,r,o,f){if(!(this instanceof e))return new e(t,r,o,f);var u=t.split(".");u.length===2&&(o=u.shift(),t=u.shift()),this.collection=t,this.oid=r,this.db=o,this.fields=f||{}}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(t.$db=this.db),t},e.prototype.toExtendedJSON=function(t){t=t||{};var r={$ref:this.collection,$id:this.oid};return t.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},e.fromExtendedJSON=function(t){var r=Object.assign({},t);return delete r.$ref,delete r.$id,delete r.$db,new e(t.$ref,t.$id,t.$db,r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},e}();Object.defineProperty(Bt.prototype,"_bsontype",{value:"DBRef"});var G=void 0;try{G=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var We=65536,Ln=1<<24,bt=We*We,Er=bt*bt,He=Er/2,qe={},Ge={},v=function(){function e(t,r,o){if(t===void 0&&(t=0),!(this instanceof e))return new e(t,r,o);typeof t=="bigint"?Object.assign(this,e.fromBigInt(t,!!r)):typeof t=="string"?Object.assign(this,e.fromString(t,!!r)):(this.low=t|0,this.high=r|0,this.unsigned=!!o),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return e.fromBits=function(t,r,o){return new e(t,r,o)},e.fromInt=function(t,r){var o,f,u;return r?(t>>>=0,(u=0<=t&&t<256)&&(f=Ge[t],f)?f:(o=e.fromBits(t,(t|0)<0?-1:0,!0),u&&(Ge[t]=o),o)):(t|=0,(u=-128<=t&&t<128)&&(f=qe[t],f)?f:(o=e.fromBits(t,t<0?-1:0,!1),u&&(qe[t]=o),o))},e.fromNumber=function(t,r){if(isNaN(t))return r?e.UZERO:e.ZERO;if(r){if(t<0)return e.UZERO;if(t>=Er)return e.MAX_UNSIGNED_VALUE}else{if(t<=-He)return e.MIN_VALUE;if(t+1>=He)return e.MAX_VALUE}return t<0?e.fromNumber(-t,r).neg():e.fromBits(t%bt|0,t/bt|0,r)},e.fromBigInt=function(t,r){return e.fromString(t.toString(),r)},e.fromString=function(t,r,o){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e.ZERO;if(typeof r=="number"?(o=r,r=!1):r=!!r,o=o||10,o<2||36<o)throw RangeError("radix");var f;if((f=t.indexOf("-"))>0)throw Error("interior hyphen");if(f===0)return e.fromString(t.substring(1),r,o).neg();for(var u=e.fromNumber(Math.pow(o,8)),s=e.ZERO,l=0;l<t.length;l+=8){var p=Math.min(8,t.length-l),w=parseInt(t.substring(l,l+p),o);if(p<8){var m=e.fromNumber(Math.pow(o,p));s=s.mul(m).add(e.fromNumber(w))}else s=s.mul(u),s=s.add(e.fromNumber(w))}return s.unsigned=r,s},e.fromBytes=function(t,r,o){return o?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.isLong=function(t){return Ft(t)&&t.__isLong__===!0},e.fromValue=function(t,r){return typeof t=="number"?e.fromNumber(t,r):typeof t=="string"?e.fromString(t,r):e.fromBits(t.low,t.high,typeof r=="boolean"?r:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,o=this.high&65535,f=this.low>>>16,u=this.low&65535,s=t.high>>>16,l=t.high&65535,p=t.low>>>16,w=t.low&65535,m=0,g=0,b=0,_=0;return _+=u+w,b+=_>>>16,_&=65535,b+=f+p,g+=b>>>16,b&=65535,g+=o+l,m+=g>>>16,g&=65535,m+=r+s,m&=65535,e.fromBits(b<<16|_,m<<16|g,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),o=t.isNegative();return r&&!o?-1:!r&&o?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(t){return this.compare(t)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(G){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var r=(this.unsigned?G.div_u:G.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,G.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var o,f,u;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;u=e.UZERO}else{if(this.eq(e.MIN_VALUE)){if(t.eq(e.ONE)||t.eq(e.NEG_ONE))return e.MIN_VALUE;if(t.eq(e.MIN_VALUE))return e.ONE;var s=this.shr(1);return o=s.div(t).shl(1),o.eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(f=this.sub(t.mul(o)),u=o.add(f.div(t)),u)}else if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();u=e.ZERO}for(f=this;f.gte(t);){o=Math.max(1,Math.floor(f.toNumber()/t.toNumber()));for(var l=Math.ceil(Math.log(o)/Math.LN2),p=l<=48?1:Math.pow(2,l-48),w=e.fromNumber(o),m=w.mul(t);m.isNegative()||m.gt(f);)o-=p,w=e.fromNumber(o,this.unsigned),m=w.mul(t);w.isZero()&&(w=e.ONE),u=u.add(w),f=f.sub(m)}return u},e.prototype.div=function(t){return this.divide(t)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},e.prototype.eq=function(t){return this.equals(t)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var t=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(t&1<<r);r--);return this.high!==0?r+33:r+1},e.prototype.greaterThan=function(t){return this.comp(t)>0},e.prototype.gt=function(t){return this.greaterThan(t)},e.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},e.prototype.gte=function(t){return this.greaterThanOrEqual(t)},e.prototype.ge=function(t){return this.greaterThanOrEqual(t)},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.lessThan=function(t){return this.comp(t)<0},e.prototype.lt=function(t){return this.lessThan(t)},e.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},e.prototype.lte=function(t){return this.lessThanOrEqual(t)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),G){var r=(this.unsigned?G.rem_u:G.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,G.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(t){return this.modulo(t)},e.prototype.rem=function(t){return this.modulo(t)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),G){var r=G.mul(this.low,this.high,t.low,t.high);return e.fromBits(r,G.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var o=this.high>>>16,f=this.high&65535,u=this.low>>>16,s=this.low&65535,l=t.high>>>16,p=t.high&65535,w=t.low>>>16,m=t.low&65535,g=0,b=0,_=0,E=0;return E+=s*m,_+=E>>>16,E&=65535,_+=u*m,b+=_>>>16,_&=65535,_+=s*w,b+=_>>>16,_&=65535,b+=f*m,g+=b>>>16,b&=65535,b+=u*w,g+=b>>>16,b&=65535,b+=s*p,g+=b>>>16,b&=65535,g+=o*m+f*w+u*p+s*l,g&=65535,e.fromBits(_<<16|E,g<<16|b,this.unsigned)},e.prototype.mul=function(t){return this.multiply(t)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(t){return!this.equals(t)},e.prototype.neq=function(t){return this.notEquals(t)},e.prototype.ne=function(t){return this.notEquals(t)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(t){return this.shiftLeft(t)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(t){return this.shiftRight(t)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),t&=63,t===0)return this;var r=this.high;if(t<32){var o=this.low;return e.fromBits(o>>>t|r<<32-t,r>>>t,this.unsigned)}else return t===32?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},e.prototype.shru=function(t){return this.shiftRightUnsigned(t)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(t){return this.subtract(t)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*bt+(this.low>>>0):this.high*bt+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var t=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},e.prototype.toBytesBE=function(){var t=this.high,r=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),o=this.div(r),f=o.mul(r).sub(this);return o.toString(t)+f.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var u=e.fromNumber(Math.pow(t,6),this.unsigned),s=this,l="";;){var p=s.div(u),w=s.sub(p.mul(u)).toInt()>>>0,m=w.toString(t);if(s=p,s.isZero())return m+l;for(;m.length<6;)m="0"+m;l=""+m+l}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(t){return this.lessThanOrEqual(t)},e.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var o=e.fromString(t.$numberLong);return r&&r.relaxed?o.toNumber():o},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},e.TWO_PWR_24=e.fromInt(Ln),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();Object.defineProperty(v.prototype,"__isLong__",{value:!0});Object.defineProperty(v.prototype,"_bsontype",{value:"Long"});var Dn=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Cn=/^(\+|-)?(Infinity|inf)$/i,jn=/^(\+|-)?NaN$/i,Tt=6111,le=-6176,Ze=6176,$n=34,pe=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ye=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ke=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Mn=/^([-+])?(\d+)?$/,Pn=31,Xe=16383,Jn=30,Vn=31;function ze(e){return!isNaN(parseInt(e,10))}function Wn(e){var t=v.fromNumber(1e9),r=v.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:r};for(var o=0;o<=3;o++)r=r.shiftLeft(32),r=r.add(new v(e.parts[o],0)),e.parts[o]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function Hn(e,t){if(!e&&!t)return{high:v.fromNumber(0),low:v.fromNumber(0)};var r=e.shiftRightUnsigned(32),o=new v(e.getLowBits(),0),f=t.shiftRightUnsigned(32),u=new v(t.getLowBits(),0),s=r.multiply(f),l=r.multiply(u),p=o.multiply(f),w=o.multiply(u);return s=s.add(l.shiftRightUnsigned(32)),l=new v(l.getLowBits(),0).add(p).add(w.shiftRightUnsigned(32)),s=s.add(l.shiftRightUnsigned(32)),w=l.shiftLeft(32).add(new v(w.getLowBits(),0)),{high:s,low:w}}function qn(e,t){var r=e.high>>>0,o=t.high>>>0;if(r<o)return!0;if(r===o){var f=e.low>>>0,u=t.low>>>0;if(f<u)return!0}return!1}function wt(e,t){throw new $('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var Te=function(){function e(t){if(!(this instanceof e))return new e(t);if(typeof t=="string")this.bytes=e.fromString(t).bytes;else if(Oe(t)){if(t.byteLength!==16)throw new $("Decimal128 must take a Buffer of 16 bytes");this.bytes=t}else throw new $("Decimal128 must take a Buffer or string")}return e.fromString=function(t){var r=!1,o=!1,f=!1,u=0,s=0,l=0,p=0,w=0,m=[0],g=0,b=0,_=0,E=0,S=0,D=0,k=new v(0,0),F=new v(0,0),J=0,x=0;if(t.length>=7e3)throw new $(""+t+" not a valid Decimal128 string");var O=t.match(Dn),M=t.match(Cn),L=t.match(jn);if(!O&&!M&&!L||t.length===0)throw new $(""+t+" not a valid Decimal128 string");if(O){var Dt=O[2],Nt=O[4],ie=O[5],Ct=O[6];Nt&&Ct===void 0&&wt(t,"missing exponent power"),Nt&&Dt===void 0&&wt(t,"missing exponent base"),Nt===void 0&&(ie||Ct)&&wt(t,"missing e before exponent")}if((t[x]==="+"||t[x]==="-")&&(r=t[x++]==="-"),!ze(t[x])&&t[x]!=="."){if(t[x]==="i"||t[x]==="I")return new e(I.from(r?Ye:Ke));if(t[x]==="N")return new e(I.from(pe))}for(;ze(t[x])||t[x]===".";){if(t[x]==="."){o&&wt(t,"contains multiple periods"),o=!0,x=x+1;continue}g<34&&(t[x]!=="0"||f)&&(f||(w=s),f=!0,m[b++]=parseInt(t[x],10),g=g+1),f&&(l=l+1),o&&(p=p+1),s=s+1,x=x+1}if(o&&!s)throw new $(""+t+" not a valid Decimal128 string");if(t[x]==="e"||t[x]==="E"){var lt=t.substr(++x).match(Mn);if(!lt||!lt[2])return new e(I.from(pe));S=parseInt(lt[0],10),x=x+lt[0].length}if(t[x])return new e(I.from(pe));if(_=0,!g)_=0,E=0,m[0]=0,l=1,g=1,u=0;else if(E=g-1,u=l,u!==1)for(;m[w+u-1]===0;)u=u-1;for(S<=p&&p-S>16384?S=le:S=S-p;S>Tt;){if(E=E+1,E-_>$n){var pt=m.join("");if(pt.match(/^0+$/)){S=Tt;break}wt(t,"overflow")}S=S-1}for(;S<le||g<l;){if(E===0&&u<g){S=le,u=0;break}if(g<l?l=l-1:E=E-1,S<Tt)S=S+1;else{var pt=m.join("");if(pt.match(/^0+$/)){S=Tt;break}wt(t,"overflow")}}if(E-_+1<u){var it=s;o&&(w=w+1,it=it+1),r&&(w=w+1,it=it+1);var jt=parseInt(t[w+E+1],10),dt=0;if(jt>=5&&(dt=1,jt===5)){for(dt=m[E]%2===1?1:0,D=w+E+2;D<it;D++)if(parseInt(t[D],10)){dt=1;break}}if(dt){for(var C=E;C>=0;C--)if(++m[C]>9&&(m[C]=0,C===0))if(S<Tt)S=S+1,m[C]=1;else return new e(I.from(r?Ye:Ke))}}if(k=v.fromNumber(0),F=v.fromNumber(0),u===0)k=v.fromNumber(0),F=v.fromNumber(0);else if(E-_<17){var C=_;for(F=v.fromNumber(m[C++]),k=new v(0,0);C<=E;C++)F=F.multiply(v.fromNumber(10)),F=F.add(v.fromNumber(m[C]))}else{var C=_;for(k=v.fromNumber(m[C++]);C<=E-17;C++)k=k.multiply(v.fromNumber(10)),k=k.add(v.fromNumber(m[C]));for(F=v.fromNumber(m[C++]);C<=E;C++)F=F.multiply(v.fromNumber(10)),F=F.add(v.fromNumber(m[C]))}var X=Hn(k,v.fromString("100000000000000000"));X.low=X.low.add(F),qn(X.low,F)&&(X.high=X.high.add(v.fromNumber(1))),J=S+Ze;var T={low:v.fromNumber(0),high:v.fromNumber(0)};X.high.shiftRightUnsigned(49).and(v.fromNumber(1)).equals(v.fromNumber(1))?(T.high=T.high.or(v.fromNumber(3).shiftLeft(61)),T.high=T.high.or(v.fromNumber(J).and(v.fromNumber(16383).shiftLeft(47))),T.high=T.high.or(X.high.and(v.fromNumber(0x7fffffffffff)))):(T.high=T.high.or(v.fromNumber(J&16383).shiftLeft(49)),T.high=T.high.or(X.high.and(v.fromNumber(562949953421311)))),T.low=X.low,r&&(T.high=T.high.or(v.fromString("9223372036854775808")));var N=I.alloc(16);return x=0,N[x++]=T.low.low&255,N[x++]=T.low.low>>8&255,N[x++]=T.low.low>>16&255,N[x++]=T.low.low>>24&255,N[x++]=T.low.high&255,N[x++]=T.low.high>>8&255,N[x++]=T.low.high>>16&255,N[x++]=T.low.high>>24&255,N[x++]=T.high.low&255,N[x++]=T.high.low>>8&255,N[x++]=T.high.low>>16&255,N[x++]=T.high.low>>24&255,N[x++]=T.high.high&255,N[x++]=T.high.high>>8&255,N[x++]=T.high.high>>16&255,N[x++]=T.high.high>>24&255,new e(N)},e.prototype.toString=function(){for(var t,r=0,o=new Array(36),f=0;f<o.length;f++)o[f]=0;var u=0,s=!1,l,p={parts:[0,0,0,0]},w,m,g=[];u=0;var b=this.bytes,_=b[u++]|b[u++]<<8|b[u++]<<16|b[u++]<<24,E=b[u++]|b[u++]<<8|b[u++]<<16|b[u++]<<24,S=b[u++]|b[u++]<<8|b[u++]<<16|b[u++]<<24,D=b[u++]|b[u++]<<8|b[u++]<<16|b[u++]<<24;u=0;var k={low:new v(_,E),high:new v(S,D)};k.high.lessThan(v.ZERO)&&g.push("-");var F=D>>26&Pn;if(F>>3===3){if(F===Jn)return g.join("")+"Infinity";if(F===Vn)return"NaN";t=D>>15&Xe,l=8+(D>>14&1)}else l=D>>14&7,t=D>>17&Xe;var J=t-Ze;if(p.parts[0]=(D&16383)+((l&15)<<14),p.parts[1]=S,p.parts[2]=E,p.parts[3]=_,p.parts[0]===0&&p.parts[1]===0&&p.parts[2]===0&&p.parts[3]===0)s=!0;else for(m=3;m>=0;m--){var x=0,O=Wn(p);if(p=O.quotient,x=O.rem.low,!!x)for(w=8;w>=0;w--)o[m*9+w]=x%10,x=Math.floor(x/10)}if(s)r=1,o[u]=0;else for(r=36;!o[u];)r=r-1,u=u+1;var M=r-1+J;if(M>=34||M<=-7||J>0){if(r>34)return g.push("".concat(0)),J>0?g.push("E+".concat(J)):J<0&&g.push("E".concat(J)),g.join("");g.push("".concat(o[u++])),r=r-1,r&&g.push(".");for(var f=0;f<r;f++)g.push("".concat(o[u++]));g.push("E"),M>0?g.push("+".concat(M)):g.push("".concat(M))}else if(J>=0)for(var f=0;f<r;f++)g.push("".concat(o[u++]));else{var L=r+J;if(L>0)for(var f=0;f<L;f++)g.push("".concat(o[u++]));else g.push("0");for(g.push(".");L++<0;)g.push("0");for(var f=0;f<r-Math.max(L-1,0);f++)g.push("".concat(o[u++]))}return g.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},e}();Object.defineProperty(Te.prototype,"_bsontype",{value:"Decimal128"});var ee=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},e.fromExtendedJSON=function(t,r){var o=parseFloat(t.$numberDouble);return r&&r.relaxed?o:new e(o)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},e}();Object.defineProperty(ee.prototype,"_bsontype",{value:"Double"});var re=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t|0}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},e}();Object.defineProperty(re.prototype,"_bsontype",{value:"Int32"});var Ie=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();Object.defineProperty(Ie.prototype,"_bsontype",{value:"MaxKey"});var Be=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();Object.defineProperty(Be.prototype,"_bsontype",{value:"MinKey"});var Gn=new RegExp("^[0-9a-fA-F]{24}$"),at=null,et=Symbol("id"),q=function(){function e(t){if(!(this instanceof e))return new e(t);var r;if(typeof t=="object"&&t&&"id"in t){if(typeof t.id!="string"&&!ArrayBuffer.isView(t.id))throw new $("Argument passed in must have an id that is of type string or Buffer");"toHexString"in t&&typeof t.toHexString=="function"?r=I.from(t.toHexString(),"hex"):r=t.id}else r=t;if(r==null||typeof r=="number")this[et]=e.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[et]=r instanceof I?r:Gt(r);else if(typeof r=="string")if(r.length===12){var o=I.from(r);if(o.byteLength===12)this[et]=o;else throw new $("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&Gn.test(r))this[et]=I.from(r,"hex");else throw new $("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");else throw new $("Argument passed in does not match the accepted types");e.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(e.prototype,"id",{get:function(){return this[et]},set:function(t){this[et]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){typeof t!="number"&&(t=Math.floor(Date.now()/1e3));var r=e.getInc(),o=I.alloc(12);return o.writeUInt32BE(t,0),at===null&&(at=xr(5)),o[4]=at[0],o[5]=at[1],o[6]=at[2],o[7]=at[3],o[8]=at[4],o[11]=r&255,o[10]=r>>8&255,o[9]=r>>16&255,o},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(t==null)return!1;if(t instanceof e)return this[et][11]===t[et][11]&&this[et].equals(t[et]);if(typeof t=="string"&&e.isValid(t)&&t.length===12&&Oe(this.id))return t===I.prototype.toString.call(this.id,"latin1");if(typeof t=="string"&&e.isValid(t)&&t.length===24)return t.toLowerCase()===this.toHexString();if(typeof t=="string"&&e.isValid(t)&&t.length===12)return I.from(t).equals(this.id);if(typeof t=="object"&&"toHexString"in t&&typeof t.toHexString=="function"){var r=t.toHexString(),o=this.toHexString().toLowerCase();return typeof r=="string"&&r.toLowerCase()===o}return!1},e.prototype.getTimestamp=function(){var t=new Date,r=this.id.readUInt32BE(0);return t.setTime(Math.floor(r)*1e3),t},e.createPk=function(){return new e},e.createFromTime=function(t){var r=I.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(t,0),new e(r)},e.createFromHexString=function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new $("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(I.from(t,"hex"))},e.isValid=function(t){if(t==null)return!1;try{return new e(t),!0}catch{return!1}},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},e.index=Math.floor(Math.random()*16777215),e}();Object.defineProperty(q.prototype,"generate",{value:Qt(function(e){return q.generate(e)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(q.prototype,"getInc",{value:Qt(function(){return q.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(q.prototype,"get_inc",{value:Qt(function(){return q.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(q,"get_inc",{value:Qt(function(){return q.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(q.prototype,"_bsontype",{value:"ObjectID"});function Zn(e){return e.split("").sort().join("")}var Ut=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this.pattern=t,this.options=Zn(r??""),this.pattern.indexOf("\0")!==-1)throw new ut("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(this.options.indexOf("\0")!==-1)throw new ut("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var o=0;o<this.options.length;o++)if(!(this.options[o]==="i"||this.options[o]==="m"||this.options[o]==="x"||this.options[o]==="l"||this.options[o]==="s"||this.options[o]==="u"))throw new ut("The regular expression option [".concat(this.options[o],"] is not supported"))}return e.parseOptions=function(t){return t?t.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(t){return t=t||{},t.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t)if(typeof t.$regex!="string"){if(t.$regex._bsontype==="BSONRegExp")return t}else return new e(t.$regex,e.parseOptions(t.$options));if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new $("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(t)))},e}();Object.defineProperty(Ut.prototype,"_bsontype",{value:"BSONRegExp"});var Ue=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();Object.defineProperty(Ue.prototype,"_bsontype",{value:"Symbol"});var Yn=v,_r=function(e){zt(t,e);function t(r,o){var f=this;return f instanceof t?(v.isLong(r)?f=e.call(this,r.low,r.high,!0)||this:Ft(r)&&typeof r.t<"u"&&typeof r.i<"u"?f=e.call(this,r.i,r.t,!0)||this:f=e.call(this,r,o,!0)||this,Object.defineProperty(f,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),f):new t(r,o)}return t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(r){return new t(v.fromInt(r,!0))},t.fromNumber=function(r){return new t(v.fromNumber(r,!0))},t.fromBits=function(r,o){return new t(r,o)},t.fromString=function(r,o){return new t(v.fromString(r,!0,o))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(r){return new t(r.$timestamp)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},t.MAX_VALUE=v.MAX_UNSIGNED_VALUE,t}(Yn);function Kn(e){return Ft(e)&&Reflect.has(e,"_bsontype")&&typeof e._bsontype=="string"}var Sr=2147483647,Nr=-2147483648,Ar=9223372036854776e3,Or=-9223372036854776e3,Xn={$oid:q,$binary:ct,$uuid:ct,$symbol:Ue,$numberInt:re,$numberDecimal:Te,$numberDouble:ee,$numberLong:v,$minKey:Be,$maxKey:Ie,$regex:Ut,$regularExpression:Ut,$timestamp:_r};function Tr(e,t){if(t===void 0&&(t={}),typeof e=="number"){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=Nr&&e<=Sr)return new re(e);if(e>=Or&&e<=Ar)return v.fromNumber(e)}return new ee(e)}if(e==null||typeof e!="object")return e;if(e.$undefined)return null;for(var r=Object.keys(e).filter(function(g){return g.startsWith("$")&&e[g]!=null}),o=0;o<r.length;o++){var f=Xn[r[o]];if(f)return f.fromExtendedJSON(e,t)}if(e.$date!=null){var u=e.$date,s=new Date;return t.legacy?typeof u=="number"?s.setTime(u):typeof u=="string"&&s.setTime(Date.parse(u)):typeof u=="string"?s.setTime(Date.parse(u)):v.isLong(u)?s.setTime(u.toNumber()):typeof u=="number"&&t.relaxed&&s.setTime(u),s}if(e.$code!=null){var l=Object.assign({},e);return e.$scope&&(l.$scope=Tr(e.$scope)),te.fromExtendedJSON(e)}if(Fn(e)||e.$dbPointer){var p=e.$ref?e:e.$dbPointer;if(p instanceof Bt)return p;var w=Object.keys(p).filter(function(g){return g.startsWith("$")}),m=!0;if(w.forEach(function(g){["$ref","$id","$db"].indexOf(g)===-1&&(m=!1)}),m)return Bt.fromExtendedJSON(p)}return e}function zn(e,t){return e.map(function(r,o){t.seenObjects.push({propertyName:"index ".concat(o),obj:null});try{return ot(r,t)}finally{t.seenObjects.pop()}})}function Qe(e){var t=e.toISOString();return e.getUTCMilliseconds()!==0?t:t.slice(0,-5)+"Z"}function ot(e,t){if((typeof e=="object"||typeof e=="function")&&e!==null){var r=t.seenObjects.findIndex(function(k){return k.obj===e});if(r!==-1){var o=t.seenObjects.map(function(k){return k.propertyName}),f=o.slice(0,r).map(function(k){return"".concat(k," -> ")}).join(""),u=o[r],s=" -> "+o.slice(r+1,o.length-1).map(function(k){return"".concat(k," -> ")}).join(""),l=o[o.length-1],p=" ".repeat(f.length+u.length/2),w="-".repeat(s.length+(u.length+l.length)/2-1);throw new $(`Converting circular structure to EJSON:
`+"    ".concat(f).concat(u).concat(s).concat(l,`
`)+"    ".concat(p,"\\").concat(w,"/"))}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return zn(e,t);if(e===void 0)return null;if(e instanceof Date||Bn(e)){var m=e.getTime(),g=m>-1&&m<2534023188e5;return t.legacy?t.relaxed&&g?{$date:e.getTime()}:{$date:Qe(e)}:t.relaxed&&g?{$date:Qe(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(typeof e=="number"&&(!t.relaxed||!isFinite(e))){if(Math.floor(e)===e){var b=e>=Nr&&e<=Sr,_=e>=Or&&e<=Ar;if(b)return{$numberInt:e.toString()};if(_)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp||In(e)){var E=e.flags;if(E===void 0){var S=e.toString().match(/[gimuy]*$/);S&&(E=S[0])}var D=new Ut(e.source,E);return D.toExtendedJSON(t)}return e!=null&&typeof e=="object"?ti(e,t):e}var Qn={Binary:function(e){return new ct(e.value(),e.sub_type)},Code:function(e){return new te(e.code,e.scope)},DBRef:function(e){return new Bt(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new Te(e.bytes)},Double:function(e){return new ee(e.value)},Int32:function(e){return new re(e.value)},Long:function(e){return v.fromBits(e.low!=null?e.low:e.low_,e.low!=null?e.high:e.high_,e.low!=null?e.unsigned:e.unsigned_)},MaxKey:function(){return new Ie},MinKey:function(){return new Be},ObjectID:function(e){return new q(e)},ObjectId:function(e){return new q(e)},BSONRegExp:function(e){return new Ut(e.pattern,e.options)},Symbol:function(e){return new Ue(e.value)},Timestamp:function(e){return _r.fromBits(e.low,e.high)}};function ti(e,t){if(e==null||typeof e!="object")throw new ut("not an object instance");var r=e._bsontype;if(typeof r>"u"){var o={};for(var f in e){t.seenObjects.push({propertyName:f,obj:null});try{var u=ot(e[f],t);f==="__proto__"?Object.defineProperty(o,f,{value:u,writable:!0,enumerable:!0,configurable:!0}):o[f]=u}finally{t.seenObjects.pop()}}return o}else if(Kn(e)){var s=e;if(typeof s.toExtendedJSON!="function"){var l=Qn[e._bsontype];if(!l)throw new $("Unrecognized or invalid _bsontype: "+e._bsontype);s=l(s)}return r==="Code"&&s.scope?s=new te(s.code,ot(s.scope,t)):r==="DBRef"&&s.oid&&(s=new Bt(ot(s.collection,t),ot(s.oid,t),ot(s.db,t),ot(s.fields,t))),s.toExtendedJSON(t)}else throw new ut("_bsontype must be a string, but was: "+typeof r)}var ht;(function(e){function t(u,s){var l=Object.assign({},{relaxed:!0,legacy:!1},s);return typeof l.relaxed=="boolean"&&(l.strict=!l.relaxed),typeof l.strict=="boolean"&&(l.relaxed=!l.strict),JSON.parse(u,function(p,w){if(p.indexOf("\0")!==-1)throw new ut("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(p)));return Tr(w,l)})}e.parse=t;function r(u,s,l,p){l!=null&&typeof l=="object"&&(p=l,l=0),s!=null&&typeof s=="object"&&!Array.isArray(s)&&(p=s,s=void 0,l=0);var w=Object.assign({relaxed:!0,legacy:!1},p,{seenObjects:[{propertyName:"(root)",obj:null}]}),m=ot(u,w);return JSON.stringify(m,s,l)}e.stringify=r;function o(u,s){return s=s||{},JSON.parse(r(u,s))}e.serialize=o;function f(u,s){return s=s||{},t(JSON.stringify(u),s)}e.deserialize=f})(ht||(ht={}));var tr=wr();tr.Map?tr.Map:function(){function e(t){t===void 0&&(t=[]),this._keys=[],this._values={};for(var r=0;r<t.length;r++)if(t[r]!=null){var o=t[r],f=o[0],u=o[1];this._keys.push(f),this._values[f]={v:u,i:this._keys.length-1}}}return e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(t){var r=this._values[t];return r==null?!1:(delete this._values[t],this._keys.splice(r.i,1),!0)},e.prototype.entries=function(){var t=this,r=0;return{next:function(){var o=t._keys[r++];return{value:o!==void 0?[o,t._values[o].v]:void 0,done:o===void 0}}}},e.prototype.forEach=function(t,r){r=r||this;for(var o=0;o<this._keys.length;o++){var f=this._keys[o];t.call(r,this._values[f].v,f,r)}},e.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},e.prototype.has=function(t){return this._values[t]!=null},e.prototype.keys=function(){var t=this,r=0;return{next:function(){var o=t._keys[r++];return{value:o!==void 0?o:void 0,done:o===void 0}}}},e.prototype.set=function(t,r){return this._values[t]?(this._values[t].v=r,this):(this._keys.push(t),this._values[t]={v:r,i:this._keys.length-1},this)},e.prototype.values=function(){var t=this,r=0;return{next:function(){var o=t._keys[r++];return{value:o!==void 0?t._values[o].v:void 0,done:o===void 0}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),e}();v.fromNumber(Rn);v.fromNumber(kn);var de=new Uint8Array(8);new DataView(de.buffer,de.byteOffset,de.byteLength);var ei=1024*1024*17;I.alloc(ei);var er=function(e,t,r){if(r||arguments.length===2)for(var o=0,f=t.length,u;o<f;o++)(u||!(o in t))&&(u||(u=Array.prototype.slice.call(t,0,o)),u[o]=t[o]);return e.concat(u||Array.prototype.slice.call(t))},ri=function(){function e(t,r,o){this.name=t,this.version=r,this.os=o,this.type="browser"}return e}(),ni=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),ii=function(){function e(t,r,o,f){this.name=t,this.version=r,this.os=o,this.bot=f,this.type="bot-device"}return e}(),oi=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),si=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),ai=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,fi=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,rr=3,ui=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ai]],nr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ci(e){return e?ir(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new si:typeof navigator<"u"?ir(navigator.userAgent):pi()}function hi(e){return e!==""&&ui.reduce(function(t,r){var o=r[0],f=r[1];if(t)return t;var u=f.exec(e);return!!u&&[o,u]},!1)}function ir(e){var t=hi(e);if(!t)return null;var r=t[0],o=t[1];if(r==="searchbot")return new oi;var f=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);f?f.length<rr&&(f=er(er([],f,!0),di(rr-f.length),!0)):f=[];var u=f.join("."),s=li(e),l=fi.exec(e);return l&&l[1]?new ii(r,u,s,l[1]):new ri(r,u,s)}function li(e){for(var t=0,r=nr.length;t<r;t++){var o=nr[t],f=o[0],u=o[1],s=u.exec(e);if(s)return f}return null}function pi(){var e=typeof process<"u"&&process.version;return e?new ni(process.version.slice(1)):null}function di(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}class nt{constructor(){if(!nt.fetch)throw new Error("DefaultNetworkTransport.fetch must be set before it's used");if(!nt.AbortController)throw new Error("DefaultNetworkTransport.AbortController must be set before it's used")}fetchWithCallbacks(t,r){this.fetch(t).then(async o=>{const f=await o.text(),u={};return o.headers.forEach((s,l)=>{u[l]=s}),{statusCode:o.status,headers:u,body:f}}).then(o=>r.onSuccess(o)).catch(o=>r.onError(o))}async fetch(t){const{timeoutMs:r,url:o,...f}=t,{signal:u,cancelTimeout:s}=this.createTimeoutSignal(r);try{return await nt.fetch(o,{...nt.extraFetchOptions,signal:u,...f})}finally{s()}}createTimeoutSignal(t){if(typeof t=="number"){const r=new nt.AbortController,o=setTimeout(()=>{r.abort()},t);return{signal:r.signal,cancelTimeout:()=>{clearTimeout(o)}}}else return{signal:void 0,cancelTimeout:()=>{}}}}nt.DEFAULT_HEADERS={"Content-Type":"application/json"};const yi=e=>{},Vt=function(e){return e&&e.Math==Math&&e},Zt=Vt(typeof globalThis=="object"&&globalThis)||Vt(typeof window=="object"&&window)||Vt(typeof self=="object"&&self)||Vt(typeof global=="object"&&global)||function(){return this}()||Function("return this")();yi(typeof __DEV__<"u"&&__DEV__);nt.fetch=Zt.fetch.bind(Zt);nt.AbortController=Zt.AbortController.bind(Zt);const Ir="3.7.2",gi=Ir,mi=typeof atob=="function",wi=typeof btoa=="function",St=typeof Buffer=="function",or=typeof TextDecoder=="function"?new TextDecoder:void 0,sr=typeof TextEncoder=="function"?new TextEncoder:void 0,xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",It=Array.prototype.slice.call(xi),Wt=(e=>{let t={};return e.forEach((r,o)=>t[r]=o),t})(It),bi=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,P=String.fromCharCode.bind(String),ar=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(e,t=r=>r)=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),Br=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Ur=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Rr=e=>{let t,r,o,f,u="";const s=e.length%3;for(let l=0;l<e.length;){if((r=e.charCodeAt(l++))>255||(o=e.charCodeAt(l++))>255||(f=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");t=r<<16|o<<8|f,u+=It[t>>18&63]+It[t>>12&63]+It[t>>6&63]+It[t&63]}return s?u.slice(0,s-3)+"===".substring(s):u},Re=wi?e=>btoa(e):St?e=>Buffer.from(e,"binary").toString("base64"):Rr,Ee=St?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let o=0,f=e.length;o<f;o+=4096)r.push(P.apply(null,e.subarray(o,o+4096)));return Re(r.join(""))},qt=(e,t=!1)=>t?Br(Ee(e)):Ee(e),vi=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?P(192|t>>>6)+P(128|t&63):P(224|t>>>12&15)+P(128|t>>>6&63)+P(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return P(240|t>>>18&7)+P(128|t>>>12&63)+P(128|t>>>6&63)+P(128|t&63)}},Ei=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,kr=e=>e.replace(Ei,vi),fr=St?e=>Buffer.from(e,"utf8").toString("base64"):sr?e=>Ee(sr.encode(e)):e=>Re(kr(e)),Et=(e,t=!1)=>t?Br(fr(e)):fr(e),ur=e=>Et(e,!0),_i=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Si=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return P((r>>>10)+55296)+P((r&1023)+56320);case 3:return P((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return P((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Fr=e=>e.replace(_i,Si),Lr=e=>{if(e=e.replace(/\s+/g,""),!bi.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",o,f;for(let u=0;u<e.length;)t=Wt[e.charAt(u++)]<<18|Wt[e.charAt(u++)]<<12|(o=Wt[e.charAt(u++)])<<6|(f=Wt[e.charAt(u++)]),r+=o===64?P(t>>16&255):f===64?P(t>>16&255,t>>8&255):P(t>>16&255,t>>8&255,t&255);return r},ke=mi?e=>atob(Ur(e)):St?e=>Buffer.from(e,"base64").toString("binary"):Lr,Dr=St?e=>ar(Buffer.from(e,"base64")):e=>ar(ke(e),t=>t.charCodeAt(0)),Cr=e=>Dr(jr(e)),Ni=St?e=>Buffer.from(e,"base64").toString("utf8"):or?e=>or.decode(Dr(e)):e=>Fr(ke(e)),jr=e=>Ur(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),_e=e=>Ni(jr(e)),Ai=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},$r=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Mr=function(){const e=(t,r)=>Object.defineProperty(String.prototype,t,$r(r));e("fromBase64",function(){return _e(this)}),e("toBase64",function(t){return Et(this,t)}),e("toBase64URI",function(){return Et(this,!0)}),e("toBase64URL",function(){return Et(this,!0)}),e("toUint8Array",function(){return Cr(this)})},Pr=function(){const e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,$r(r));e("toBase64",function(t){return qt(this,t)}),e("toBase64URI",function(){return qt(this,!0)}),e("toBase64URL",function(){return qt(this,!0)})},Oi=()=>{Mr(),Pr()},Yt={version:Ir,VERSION:gi,atob:ke,atobPolyfill:Lr,btoa:Re,btoaPolyfill:Rr,fromBase64:_e,toBase64:Et,encode:Et,encodeURI:ur,encodeURL:ur,utob:kr,btou:Fr,decode:_e,isValid:Ai,fromUint8Array:qt,toUint8Array:Cr,extendString:Mr,extendUint8Array:Pr,extendBuiltins:Oi},Ti={relaxed:!1};function Jr(e){return ht.serialize(e,Ti)}function Vr(e){return Array.isArray(e)?e.map(t=>ht.deserialize(t)):ht.deserialize(e)}var Se;(function(e){e.Normal="normal",e.Server="server"})(Se||(Se={}));var z;(function(e){e.NAME="name",e.EMAIL="email",e.PICTURE="picture",e.FIRST_NAME="first_name",e.LAST_NAME="last_name",e.GENDER="gender",e.BIRTHDAY="birthday",e.MIN_AGE="min_age",e.MAX_AGE="max_age"})(z||(z={}));const cr={[z.NAME]:"name",[z.EMAIL]:"email",[z.PICTURE]:"pictureUrl",[z.FIRST_NAME]:"firstName",[z.LAST_NAME]:"lastName",[z.GENDER]:"gender",[z.BIRTHDAY]:"birthday",[z.MIN_AGE]:"minAge",[z.MAX_AGE]:"maxAge"};class Wr{constructor(t){if(this.type=Se.Normal,this.identities=[],typeof t=="object"&&t!==null){const{type:r,identities:o,data:f}=t;if(typeof r=="string")this.type=r;else throw new Error("Expected 'type' in the response body");if(Array.isArray(o))this.identities=o.map(u=>{const{id:s,provider_type:l}=u;return{id:s,providerType:l}});else throw new Error("Expected 'identities' in the response body");if(typeof f=="object"&&f!==null){const u=Object.fromEntries(Object.entries(f).map(([s,l])=>s in cr?[cr[s],l]:[s,l]));this.data=Vr(u)}else throw new Error("Expected 'data' in the response body")}else this.data={}}}class Q{constructor(t,r){this.storage=t,this.keyPart=r}get(t){return this.storage.get(this.keyPart+Q.PART_SEPARATOR+t)}set(t,r){return this.storage.set(this.keyPart+Q.PART_SEPARATOR+t,r)}remove(t){return this.storage.remove(this.keyPart+Q.PART_SEPARATOR+t)}prefix(t){return new Q(this,t)}clear(t=""){return this.storage.clear(this.keyPart+Q.PART_SEPARATOR+t)}addListener(t){return this.storage.addListener(t)}removeListener(t){return this.storage.addListener(t)}}Q.PART_SEPARATOR=":";class Ii{constructor(){this.storage={},this.listeners=new Set}get(t){return t in this.storage?this.storage[t]:null}set(t,r){this.storage[t]=r,this.fireListeners()}remove(t){delete this.storage[t],this.fireListeners()}prefix(t){return new Q(this,t)}clear(t){for(const r of Object.keys(this.storage))(!t||r.startsWith(t))&&delete this.storage[r];this.fireListeners()}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}fireListeners(){this.listeners.forEach(t=>t())}}const ye="accessToken",ge="refreshToken",me="profile",we="providerType";class Bi extends Q{constructor(t,r){super(t,`user(${r})`)}get accessToken(){return this.get(ye)}set accessToken(t){t===null?this.remove(ye):this.set(ye,t)}get refreshToken(){return this.get(ge)}set refreshToken(t){t===null?this.remove(ge):this.set(ge,t)}get profile(){const t=this.get(me);if(t){const r=new Wr;return Object.assign(r,JSON.parse(t)),r}}set profile(t){t?this.set(me,JSON.stringify(t)):this.remove(me)}get providerType(){const t=this.get(we);if(t)return t}set providerType(t){t?this.set(we,t):this.remove(we)}}function Ne(e){return Object.fromEntries(Object.entries(e).filter(t=>typeof t[1]<"u"))}function Ui(e,t){let r="";for(let o=0;o<e;o++)r+=t[Math.floor(Math.random()*t.length)];return r}function Hr(e,t=!0){const r=Ne(e);return(t&&Object.keys(r).length>0?"?":"")+Object.entries(r).map(([f,u])=>`${f}=${encodeURIComponent(u)}`).join("&")}function Ri(e){const t=e[0]==="?"?e.substr(1):e;return Object.fromEntries(t.split("&").filter(r=>r.length>0).map(r=>r.split("=")).map(([r,o])=>[r,decodeURIComponent(o)]))}const ki=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];function Fi(e){for(const t of e)if(typeof t=="object"&&t)for(const[r,o]of Object.entries(t))o===void 0&&delete t[r];return e}function Li(e){return Fi(e).map(r=>typeof r=="object"?Jr(r):r)}class ne{constructor(t,r={}){this.fetcher=t,this.serviceName=r.serviceName,this.argsTransformation=r.argsTransformation||Li}static create(t,r={}){const o=new ne(t,r);return new Proxy(o,{get(f,u,s){if(typeof u=="string"&&ki.indexOf(u)===-1)return f.callFunction.bind(f,u);{const l=Reflect.get(f,u,s);return typeof l=="function"?l.bind(f):l}}})}async callFunction(t,...r){const o={name:t,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(o.service=this.serviceName);const f=this.fetcher.appRoute;return this.fetcher.fetchJSON({method:"POST",path:f.functionsCall().path,body:o})}callFunctionStreaming(t,...r){const o={name:t,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(o.service=this.serviceName);const f=this.fetcher.appRoute,u=Hr({baas_request:Yt.encode(JSON.stringify(o))});return this.fetcher.fetchStream({method:"GET",path:f.functionsCall().path+u})}}class Di{constructor(t,r="local-userpass"){this.fetcher=t,this.providerName=r}async registerUser(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).register().path,body:t})}async confirmUser(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirm().path,body:t})}async resendConfirmationEmail(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirmSend().path,body:t})}async retryCustomConfirmation(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirmCall().path,body:t})}async resetPassword(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).reset().path,body:t})}async sendResetPasswordEmail(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).resetSend().path,body:t})}async callResetPasswordFunction(t,...r){const o=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:o.emailPasswordAuth(this.providerName).resetCall().path,body:{...t,arguments:r}})}}function Ci(){return{path:"/api/client/v2.0",app(e){return{path:this.path+`/app/${e}`,location(){return{path:this.path+"/location"}},authProvider(t){return{path:this.path+`/auth/providers/${t}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(t){return{...this.authProvider(t),register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},confirmCall(){return{path:this.path+"/confirm/call"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(e){return{path:this.path+`/${e}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}},delete(){return{path:this.path+"/delete"}}}}}}var K={api:Ci};class ji{constructor(t){this.fetcher=t}create(t){return this.fetcher.fetchJSON({method:"POST",body:{name:t},path:K.api().auth().apiKeys().path,tokenType:"refresh"})}fetch(t){return this.fetcher.fetchJSON({method:"GET",path:K.api().auth().apiKeys().key(t).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:K.api().auth().apiKeys().path})}async delete(t){await this.fetcher.fetchJSON({method:"DELETE",path:K.api().auth().apiKeys().key(t).path,tokenType:"refresh"})}async enable(t){await this.fetcher.fetchJSON({method:"PUT",path:K.api().auth().apiKeys().key(t).enable().path,tokenType:"refresh"})}async disable(t){await this.fetcher.fetchJSON({method:"PUT",path:K.api().auth().apiKeys().key(t).disable().path,tokenType:"refresh"})}}let Ae=null;function $i(e){Ae=e}function Rt(){if(Ae)return Ae;throw new Error("Cannot get environment before it's set")}class xe extends Error{constructor({message:t,code:r}){super(t),this.name="WatchError",this.code=r}}var W;(function(e){e.NEED_DATA="NEED_DATA",e.HAVE_EVENT="HAVE_EVENT",e.HAVE_ERROR="HAVE_ERROR"})(W||(W={}));class Mi{constructor(){this._state=W.NEED_DATA,this._error=null,this._textDecoder=new(Rt()).TextDecoder,this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(t){this.assertState(W.NEED_DATA),this._buffer+=this._textDecoder.decode(t,{stream:!0}),this.advanceBufferState()}feedLine(t){if(this.assertState(W.NEED_DATA),t.endsWith(`
`)&&(t=t.substr(0,t.length-1)),t.endsWith("\r")&&(t=t.substr(0,t.length-1)),t.length===0){if(this._dataBuffer.length===0){this._eventType="";return}this._dataBuffer.endsWith(`
`)&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(t[0]===":")return;const r=t.indexOf(":"),o=t.substr(0,r);let f=r===-1?"":t.substr(r+1);f.startsWith(" ")&&(f=f.substr(1)),o==="event"?this._eventType=f:o==="data"&&(this._dataBuffer+=f,this._dataBuffer+=`
`)}feedSse(t){this.assertState(W.NEED_DATA);const r=t.data.indexOf("%");if(r!==-1){let o="",f=0;for(let u=r;u!==-1;u=t.data.indexOf("%",f)){o+=t.data.substr(f,u-f);const s=t.data.substr(u,3);s==="%25"?o+="%":s==="%0A"?o+=`
`:s==="%0D"?o+="\r":o+=s,f=u+s.length}o+=t.data.substr(f),t.data=o}if(!t.eventType||t.eventType==="message"){try{const o=ht.parse(t.data);if(typeof o=="object"){this._nextEvent=o,this._state=W.HAVE_EVENT;return}}catch{}this._state=W.HAVE_ERROR,this._error=new xe({message:"server returned malformed event: "+t.data,code:"bad bson parse"})}else if(t.eventType==="error"){this._state=W.HAVE_ERROR,this._error=new xe({message:t.data,code:"unknown"});try{const{error_code:o,error:f}=ht.parse(t.data);if(typeof o!="string"||typeof f!="string")return;this._error=new xe({message:f,code:o})}catch{return}}}get state(){return this._state}nextEvent(){this.assertState(W.HAVE_EVENT);const t=this._nextEvent;return this._state=W.NEED_DATA,this.advanceBufferState(),t}get error(){return this._error}advanceBufferState(){for(this.assertState(W.NEED_DATA);this.state===W.NEED_DATA;){if(this._bufferOffset===this._buffer.length){this._buffer="",this._bufferOffset=0;return}const t=this._buffer.indexOf(`
`,this._bufferOffset);if(t===-1){this._bufferOffset!==0&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0);return}this.feedLine(this._buffer.substr(this._bufferOffset,t-this._bufferOffset)),this._bufferOffset=t+1}}assertState(t){if(this._state!==t)throw Error(`Expected WatchStream to be in state ${t}, but in state ${this._state}`)}}class Pi{constructor(t,r,o,f){this.functions=ne.create(t,{serviceName:r}),this.databaseName=o,this.collectionName=f,this.serviceName=r,this.fetcher=t}find(t={},r={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:t,project:r.projection,sort:r.sort,limit:r.limit})}findOne(t={},r={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:t,project:r.projection,sort:r.sort})}findOneAndUpdate(t={},r,o={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:t,update:r,sort:o.sort,projection:o.projection,upsert:o.upsert,returnNewDocument:o.returnNewDocument})}findOneAndReplace(t={},r,o={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:t,update:r,sort:o.sort,projection:o.projection,upsert:o.upsert,returnNewDocument:o.returnNewDocument})}findOneAndDelete(t={},r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:t,sort:r.sort,projection:r.projection})}aggregate(t){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:t})}count(t={},r={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:t,limit:r.limit})}insertOne(t){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:t})}insertMany(t){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:t})}deleteOne(t={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:t})}deleteMany(t={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:t})}updateOne(t,r,o={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:t,update:r,upsert:o.upsert,arrayFilters:o.arrayFilters})}updateMany(t,r,o={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:t,update:r,upsert:o.upsert,arrayFilters:o.arrayFilters})}watch({ids:t,filter:r}={}){const f=this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:t,filter:r}).then(l=>l[Symbol.asyncIterator]()),u=this.watchImpl(f),s=u.return;return Object.assign(u,{return(l){return f.then(p=>p.return?p.return(l):void 0),s.call(u,l)}})}async*watchImpl(t){const r=new Mi,o=t.then(f=>({[Symbol.asyncIterator]:()=>f}));for await(const f of await o)if(f){for(r.feedBuffer(f);r.state==W.HAVE_EVENT;)yield r.nextEvent();if(r.state==W.HAVE_ERROR)throw r.error}}}function Ji(e,t,r,o){return new Pi(e,t,r,o)}function Vi(e,t,r){return{collection:Ji.bind(null,e,t,r)}}function Wi(e,t="mongo-db"){return{db:Vi.bind(null,e,t)}}const Hi="000000000000000000000000";var ft;(function(e){e.Active="active",e.LoggedOut="logged-out",e.Removed="removed"})(ft||(ft={}));var hr;(function(e){e.Normal="normal",e.Server="server"})(hr||(hr={}));class lr{constructor(t){if(this.app=t.app,this.id=t.id,this.storage=new Bi(this.app.storage,this.id),"accessToken"in t&&"refreshToken"in t&&"providerType"in t)this._accessToken=t.accessToken,this._refreshToken=t.refreshToken,this.providerType=t.providerType,this.storage.accessToken=t.accessToken,this.storage.refreshToken=t.refreshToken,this.storage.providerType=t.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;const r=this.storage.providerType;if(this._profile=this.storage.profile,r)this.providerType=r;else throw new Error("Storage is missing a provider type")}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new ji(this.fetcher),this.functions=ne.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(t){this._accessToken=t,this.storage.accessToken=t}get refreshToken(){return this._refreshToken}set refreshToken(t){this._refreshToken=t,this.storage.refreshToken=t}get state(){return this.id in this.app.allUsers?this.refreshToken===null?ft.LoggedOut:ft.Active:ft.Removed}get isLoggedIn(){return this.state===ft.Active}get customData(){if(this.accessToken)return this.decodeAccessToken().userData;throw new Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw new Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw new Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){const t=this.accessToken.split(".")[1];if(t){const o=JSON.parse(Yt.decode(t)).baas_device_id;if(typeof o=="string"&&o!==Hi)return o}}return null}async refreshProfile(){const t=await this.fetcher.fetchJSON({method:"GET",path:K.api().auth().profile().path});this._profile=new Wr(t),this.storage.profile=this._profile}async logOut(){try{this._refreshToken!==null&&await this.fetcher.fetchJSON({method:"DELETE",path:K.api().auth().session().path,tokenType:"refresh"})}catch(t){if(!(t instanceof Error)||!t.message.includes("failed to find refresh token"))throw t}finally{this.accessToken=null,this.refreshToken=null}}async linkCredentials(t){const r=await this.app.authenticator.authenticate(t,this);if(this.id!==r.userId){const o=`got user id ${r.userId} expected ${this.id}`;throw new Error(`Link response ment for another user (${o})`)}this.accessToken=r.accessToken,await this.refreshProfile()}async refreshAccessToken(){const t=await this.fetcher.fetchJSON({method:"POST",path:K.api().auth().session().path,tokenType:"refresh"}),{access_token:r}=t;if(typeof r=="string")this.accessToken=r;else throw new Error("Expected an 'access_token' in the response")}async refreshCustomData(){return await this.refreshAccessToken(),this.customData}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}callFunction(t,...r){return this.functions.callFunction(t,...r)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(){throw new Error("Not yet implemented")}mongoClient(t){return Wi(this.fetcher,t)}decodeAccessToken(){if(this.accessToken){const t=this.accessToken.split(".");if(t.length!==3)throw new Error("Expected an access token with three parts");const r=t[1],o=Yt.decode(r),f=JSON.parse(o),{exp:u,iat:s,sub:l,user_data:p={}}=f;if(typeof u!="number")throw new Error("Failed to decode access token 'exp'");if(typeof s!="number")throw new Error("Failed to decode access token 'iat'");return{expires:u,issuedAt:s,subject:l,userData:p}}else throw new Error("Missing an access token")}}class Y{constructor(t,r,o){this.providerName=t,this.providerType=r,this.payload=o}static anonymous(){return new Y("anon-user","anon-user",{})}static apiKey(t){return new Y("api-key","api-key",{key:t})}static emailPassword(t,r){return new Y("local-userpass","local-userpass",{username:t,password:r})}static function(t){return new Y("custom-function","custom-function",t)}static jwt(t){return new Y("custom-token","custom-token",{token:t})}static google(t){return new Y("oauth2-google","oauth2-google",Y.derivePayload(t))}static derivePayload(t){if(typeof t=="string")throw new Error("`google(<tokenString>)` has been deprecated.  Please use `google(<authCodeObject>).");if(Object.keys(t).length===1){if("authCode"in t||"redirectUrl"in t)return t;if("idToken"in t)return{id_token:t.idToken};throw new Error("Unexpected payload: "+JSON.stringify(t))}else throw new Error("Expected only one property in payload, got "+JSON.stringify(t))}static facebook(t){return new Y("oauth2-facebook","oauth2-facebook",t.includes("://")?{redirectUrl:t}:{accessToken:t})}static apple(t){return new Y("oauth2-apple","oauth2-apple",t.includes("://")?{redirectUrl:t}:{id_token:t})}}const pr="userIds",dr="deviceId";class qi extends Q{constructor(t,r){super(t,`app(${r})`)}getUserIds(){const t=this.get(pr),r=t?JSON.parse(t):[];if(Array.isArray(r))return[...new Set(r)];throw new Error("Expected the user ids to be an array")}setUserIds(t,r){if(r){const o=this.getUserIds();for(const f of o)t.indexOf(f)===-1&&t.push(f)}this.set(pr,JSON.stringify(t))}removeUserId(t){const o=this.getUserIds().filter(f=>f!==t);this.setUserIds(o,!1)}getDeviceId(){return this.get(dr)}setDeviceId(t){this.set(dr,t)}}const Gi="abcdefghijklmnopqrstuvwxyz",Zi=100,Yi={_stitch_client_app_id:"appId",_baas_client_app_id:"appId",_stitch_ua:"userAuth",_baas_ua:"userAuth",_stitch_link:"link",_baas_link:"link",_stitch_error:"error",_baas_error:"error",_stitch_state:"state",_baas_state:"state"};class _t{constructor(t,r=Rt().openWindow){this.storage=t.prefix("oauth2"),this.openWindow=r}static parseRedirectLocation(t){const r=Ri(t),o={};for(const[f,u]of Object.entries(Yi)){const s=r[f];s&&(o[u]=s)}return o}static handleRedirect(t,r=Rt().defaultStorage){const o=_t.parseRedirectLocation(t),{state:f,error:u}=o;if(typeof f=="string"){const s=r.prefix("oauth2");_t.getStateStorage(s,f).set("result",JSON.stringify(o))}else throw u?new Error(`Failed to handle OAuth 2.0 redirect: ${u}`):new Error("Failed to handle OAuth 2.0 redirect.")}static decodeAuthInfo(t){const r=(t||"").split("$");if(r.length===4){const[o,f,u,s]=r;return{accessToken:o,refreshToken:f,userId:u,deviceId:s}}else throw new Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(t,r){return t.prefix(`state(${r})`)}openWindowAndWaitForRedirect(t,r){const o=_t.getStateStorage(this.storage,r);return new Promise((f,u)=>{let s=null,l;const p=()=>{const w=o.get("result");if(w){const m=JSON.parse(w);o.removeListener(p),o.clear();try{s&&(clearInterval(l),s.close())}catch(g){console.warn(`Failed closing redirect window: ${g}`)}finally{f(m)}}};o.addListener(p),s=this.openWindow(t),l=setInterval(()=>{if(!s)clearInterval(l);else if(s.closed){clearInterval(l),o.removeListener(p);const w=new Error("Window closed");u(w)}},Zi)})}generateState(){return Ui(12,Gi)}}const yr="x-baas-location";class Ki{constructor(t,r,o){this.fetcher=t,this.oauth2=new _t(r),this.getDeviceInformation=o}async authenticate(t,r){const o=this.getDeviceInformation(),f=typeof r=="object";if(t.providerType.startsWith("oauth2")&&typeof t.payload.redirectUrl=="string"){const u=this.oauth2.generateState(),s=await this.getLogInUrl(t,f,{state:u,redirect:t.payload.redirectUrl,providerRedirectHeader:f?!0:void 0,device:f?void 0:o.encode()});if(f){const p=(await this.fetcher.fetch({method:"GET",url:s,tokenType:f?"access":"none",user:r,mode:"cors",credentials:"include"})).headers.get(yr);if(p)return this.openWindowAndWaitForAuthResponse(p,u);throw new Error(`Missing ${yr} header`)}else return this.openWindowAndWaitForAuthResponse(s,u)}else{const u=await this.getLogInUrl(t,f),s=await this.fetcher.fetchJSON({method:"POST",url:u,body:{...t.payload,options:{device:o.toJSON()}},tokenType:f?"access":"none",user:r}),{user_id:l,access_token:p,refresh_token:w=null,device_id:m}=s;if(typeof l!="string")throw new Error("Expected a user id in the response");if(typeof p!="string")throw new Error("Expected an access token in the response");if(typeof w!="string"&&w!==null)throw new Error("Expected refresh token to be a string or null");if(typeof m!="string")throw new Error("Expected device id to be a string");return{userId:l,accessToken:p,refreshToken:w,deviceId:m}}}async getLogInUrl(t,r=!1,o={}){const u=this.fetcher.appRoute.authProvider(t.providerName).login(),s=Hr({link:r?"true":void 0,...o});return await this.fetcher.locationUrl+u.path+s}async openWindowAndWaitForAuthResponse(t,r){const o=await this.oauth2.openWindowAndWaitForRedirect(t,r);return _t.decodeAuthInfo(o.userAuth)}}class Kt extends Error{constructor(t,r,o,f,u,s,l){const p=f?`status ${o} ${f}`:`status ${o}`;typeof u=="string"?super(`Request failed (${t} ${r}): ${u} (${p})`):super(`Request failed (${t} ${r}): (${p})`),this.method=t,this.url=r,this.statusText=f,this.statusCode=o,this.error=u,this.errorCode=s,this.link=l}static async fromRequestAndResponse(t,r){var o;const{url:f,method:u}=t,{status:s,statusText:l}=r;if(!((o=r.headers.get("content-type"))===null||o===void 0)&&o.startsWith("application/json")){const p=await r.json();if(typeof p=="object"&&p){const{error:w,error_code:m,link:g}=p;return new Kt(u,f,s,l,typeof w=="string"?w:void 0,typeof m=="string"?m:void 0,typeof g=="string"?g:void 0)}}return new Kt(u,f,s,l)}}function Xi(e){if(typeof e!="object"||e===null)throw new Error("Expected a non-null object");if(Symbol.asyncIterator in e)return e;if("getReader"in e){const t=e;return{[Symbol.asyncIterator](){const r=t.getReader();return{next(){return r.read()},async return(){return await r.cancel(),{done:!0,value:null}}}}}}else throw new Error("Expected an AsyncIterable or a ReadableStream")}class vt{constructor({appId:t,transport:r,userContext:o,locationUrlContext:f}){this.appId=t,this.transport=r,this.userContext=o,this.locationUrlContext=f}static buildAuthorizationHeader(t,r){if(!t||r==="none")return{};if(r==="access")return{Authorization:`Bearer ${t.accessToken}`};if(r==="refresh")return{Authorization:`Bearer ${t.refreshToken}`};throw new Error(`Unexpected token type (${r})`)}static buildBody(t){if(t){if(typeof t=="object"&&t!==null)return JSON.stringify(Jr(t));if(typeof t=="string")return t;throw console.log("body is",t),new Error("Unexpected type of body")}else return}static buildJsonHeader(t){return t&&t.length>0?{"Content-Type":"application/json"}:{}}clone(t){return new vt({appId:this.appId,transport:this.transport,userContext:this.userContext,locationUrlContext:this.locationUrlContext,...t})}async fetch(t){const{path:r,url:o,tokenType:f="access",user:u=this.userContext.currentUser,...s}=t;if(typeof r=="string"&&typeof o=="string")throw new Error("Use of 'url' and 'path' mutually exclusive");if(typeof r=="string"){const l=await this.locationUrlContext.locationUrl+r;return this.fetch({...t,path:void 0,url:l})}else if(typeof o=="string"){const l=await this.transport.fetch({...s,url:o,headers:{...vt.buildAuthorizationHeader(u,f),...t.headers}});if(l.ok)return l;if(u&&l.status===401&&f==="access")return await u.refreshAccessToken(),this.fetch({...t,user:u});throw u&&l.status===401&&f==="refresh"&&(u.accessToken=null,u.refreshToken=null),await Kt.fromRequestAndResponse(t,l)}else throw new Error("Expected either 'url' or 'path'")}async fetchJSON(t){const{body:r}=t,o=vt.buildBody(r),f=vt.buildJsonHeader(o),u=await this.fetch({...t,body:o,headers:{Accept:"application/json",...f,...t.headers}}),s=u.headers.get("content-type");if(s!=null&&s.startsWith("application/json")){const l=await u.json();return Vr(l)}else{if(s===null)return null;throw new Error(`Expected JSON response, got "${s}"`)}}async fetchStream(t){const{body:r}=await this.fetch({...t,headers:{Accept:"text/event-stream",...t.headers}});return Xi(r)}get appRoute(){return K.api().app(this.appId)}get locationUrl(){return this.locationUrlContext.locationUrl}}const zi="deviceId";var gr;(function(e){e.DEVICE_ID="deviceId",e.APP_ID="appId",e.APP_VERSION="appVersion",e.PLATFORM="platform",e.PLATFORM_VERSION="platformVersion",e.SDK_VERSION="sdkVersion"})(gr||(gr={}));class Qi{constructor({appId:t,appVersion:r,deviceId:o}){this.sdkVersion="2.0.0";const f=Rt();this.platform=f.platform,this.platformVersion=f.platformVersion,this.appId=t,this.appVersion=r,this.deviceId=o}encode(){const t=Ne(this);return Yt.encode(JSON.stringify(t))}toJSON(){return Ne(this)}}const to="https://realm.mongodb.com";class st{constructor(t){this.users=[],this._locationUrl=null;const r=typeof t=="string"?{id:t}:t;if(typeof r=="object"&&typeof r.id=="string")this.id=r.id;else throw new Error("Missing an Atlas App Services app-id");this.baseUrl=r.baseUrl||to,r.skipLocationRequest&&(this._locationUrl=Promise.resolve(this.baseUrl)),this.localApp=r.app;const{storage:o,transport:f=new nt}=r;this.fetcher=new vt({appId:this.id,userContext:this,locationUrlContext:this,transport:f}),this.emailPasswordAuth=new Di(this.fetcher);const u=o||Rt().defaultStorage;this.storage=new qi(u,this.id),this.authenticator=new Ki(this.fetcher,u,()=>this.deviceInformation);try{this.hydrate()}catch(s){this.storage.clear(),console.warn("Realm app hydration failed:",s instanceof Error?s.message:s)}}static getApp(t){if(t in st.appCache)return st.appCache[t];{const r=new st(t);return st.appCache[t]=r,r}}switchUser(t){const r=this.users.findIndex(f=>f===t);if(r===-1)throw new Error("The user was never logged into this app");const[o]=this.users.splice(r,1);this.users.unshift(o)}async logIn(t,r=!0){const o=await this.authenticator.authenticate(t),f=this.createOrUpdateUser(o,t.providerType);this.switchUser(f),r&&await f.refreshProfile(),this.storage.setUserIds(this.users.map(s=>s.id),!0);const u=o.deviceId;return u&&u!=="000000000000000000000000"&&this.storage.set(zi,u),f}async removeUser(t){const r=this.users.findIndex(o=>o===t);if(r===-1)throw new Error("The user was never logged into this app");this.users.splice(r,1),await t.logOut(),this.storage.remove(`user(${t.id}):profile`),this.storage.removeUserId(t.id)}async deleteUser(t){await this.fetcher.fetchJSON({method:"DELETE",path:K.api().auth().delete().path}),await this.removeUser(t)}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}get currentUser(){const t=this.users.filter(r=>r.state===ft.Active);return t.length===0?null:t[0]}get allUsers(){return Object.fromEntries(this.users.map(t=>[t.id,t]))}get locationUrl(){if(!this._locationUrl){const t=K.api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+t,tokenType:"none"}).then(r=>{if(typeof r!="object")throw new Error("Expected response body be an object");return r}).then(({hostname:r})=>{if(typeof r!="string")throw new Error("Expected response to contain a 'hostname'");return r}).catch(r=>{throw this._locationUrl=null,r})}return this._locationUrl}get deviceInformation(){const t=this.storage.getDeviceId(),r=typeof t=="string"&&t!=="000000000000000000000000"?new q(t):void 0;return new Qi({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:r})}createOrUpdateUser(t,r){const o=this.users.find(f=>f.id===t.userId);if(o)return o.accessToken=t.accessToken,o.refreshToken=t.refreshToken,o;{if(!t.refreshToken)throw new Error("No refresh token in response from server");const f=new lr({app:this,id:t.userId,accessToken:t.accessToken,refreshToken:t.refreshToken,providerType:r});return this.users.unshift(f),f}}hydrate(){const t=this.storage.getUserIds();this.users=t.map(r=>new lr({app:this,id:r}))}}st.appCache={};st.Credentials=Y;const eo=e=>{},Ht=function(e){return e&&e.Math==Math&&e},kt=Ht(typeof globalThis=="object"&&globalThis)||Ht(typeof window=="object"&&window)||Ht(typeof self=="object"&&self)||Ht(typeof global=="object"&&global)||function(){return this}()||Function("return this")();eo(typeof __DEV__<"u"&&__DEV__);class ro{constructor(){if(typeof kt.localStorage=="object")this.global=kt;else throw new Error("Cannot use LocalStorage without a global localStorage object")}get(t){return this.global.localStorage.getItem(t)}set(t,r){return this.global.localStorage.setItem(t,r)}remove(t){return this.global.localStorage.removeItem(t)}prefix(t){return new Q(this,t)}clear(t){const r=[];for(let o=0;o<this.global.localStorage.length;o++){const f=this.global.localStorage.key(o);f&&(!t||f.startsWith(t))&&r.push(f)}for(const o of r)this.global.localStorage.removeItem(o)}addListener(t){return this.global.addEventListener("storage",t)}removeListener(t){return this.global.removeEventListener("storage",t)}}const xt=ci(),no="localStorage"in kt?ro:Ii;function io(e){return typeof kt.open=="function"?kt.open(e):(console.log(`Please open ${e}`),null)}const oo={defaultStorage:new no().prefix("realm-web"),openWindow:io,platform:(xt==null?void 0:xt.name)||"web",platformVersion:(xt==null?void 0:xt.version)||"0.0.0",TextDecoder};$i(oo);const so=tn("masterdata",{state:()=>({coutrycodes:[]})}),Lt=e=>(fn("data-v-77f3015b"),e=e(),un(),e),ao={class:"container-fluid"},fo={class:"row"},uo=Lt(()=>R("div",{class:"col-2"},[R("label",{for:"selectCode"},"Country Code")],-1)),co={class:"col-2"},ho=["value"],lo=Lt(()=>R("div",{class:"col-2"},null,-1)),po={class:"col-3"},yo=Lt(()=>R("div",{class:"col-3"},null,-1)),go={class:"row",style:{width:"80%"}},mo=Lt(()=>R("label",{class:"col-6"},null,-1)),wo={class:"col-1"},xo=Lt(()=>R("div",{class:"row",style:{width:"80%"}},[R("div",{class:"card col-2 text-center bg-secondary"},"ID"),R("div",{class:"card col-3 text-center bg-secondary"},"ThumbNail"),R("div",{class:"card col-4 text-center bg-secondary"},"TiTle")],-1)),bo={class:"col-2"},vo={class:"col-3"},Eo=["src"],_o={class:"col-4"},So=["onClick"],No=en({__name:"search",async setup(e){let t,r;const f="Bearer "+Xr().accessToken,u=yt(""),s=new st({id:"webcamql-qrkjj"}),l=yt([]),p=yt(""),w=yt(""),m=yt(0),g=yt(""),b=rn(),_=async function(x){const O=Y.apiKey(x);return await s.logIn(O)},E=so();if(E.coutrycodes.length===0){const x=([t,r]=Me(()=>_("zltDLjGDHqJHzQ0tSHA3XSZJUTnV5TxBmjW2PopKInszFsDxqSAEubmtq5tRRLgm")),t=await t,r(),t),O=([t,r]=Me(()=>x.functions.getCountryCode()),t=await t,r(),t);console.log("get country code "+O.length),E.coutrycodes=O}async function S(x){try{l.value=await Qr(f,x),p.value=l.value[0].id,w.value=l.value.slice(-1)[0].id,m.value=l.value.length;const O=document.getElementById("next"),M=document.getElementById("prev");l.value.length>=200?(O.disabled=!1,O.style.textDecoration="underline"):(O.disabled=!0,O.style.textDecoration="none"),g.value==p.value?(M.disabled=!0,M.style.textDecoration="none"):(M.disabled=!1,M.style.textDecoration="underline")}catch{m.value=0}}const D=async function(){const x=`query {
        webcams(query:{status:"active",
                        id_gt:"0000000000",
                        location:{
                        country_code:"${u.value}"}
                    }
        ,limit:200
        ,sortBy:ID_ASC)`+fe+"}";await S(x),g.value=p.value,document.getElementById("prev").disabled=!0,document.getElementById("prev").style.textDecoration="none"},k=async function(){const x=`query {
        webcams(query:{status:"active",
                        id_gt:"${w.value}",
                        location:{
                        country_code:"${u.value}"}
                    }
        ,limit:200
        ,sortBy:ID_ASC)`+fe+"}";S(x)},F=async function(){const x=`query {
        webcams(query:{status:"active",
                        id_lt:"${p.value}",
                        location:{
                        country_code:"${u.value}"}
                    }
        ,limit:200
        ,sortBy:ID_ASC)`+fe+"}";S(x)},J=function(x){b.push({path:"/",query:{lat:x.location.latitude,lng:x.location.longitude}})};return(x,O)=>{const M=zr;return At(),Ot(ae,null,[nn(M,{class:"header"}),R("div",ao,[R("div",fo,[uo,R("div",co,[on(R("select",{id:"selectCode","onUpdate:modelValue":O[0]||(O[0]=L=>u.value=L)},[(At(!0),Ot(ae,null,Pe(an(E).coutrycodes,L=>(At(),Ot("option",{key:L,value:L},Pt(L),9,ho))),128))],512),[[sn,u.value]])]),lo,R("div",po,[R("button",{type:"button",class:"btn btn-primary",onClick:O[1]||(O[1]=L=>D())},"Search ")]),yo]),R("div",go,[R("button",{type:"button",id:"prev",class:"col-1 link-button",onClick:O[2]||(O[2]=L=>F())},"Prev"),R("button",{type:"button",id:"next",class:"col-1 link-button",onClick:O[3]||(O[3]=L=>k())},"Next"),mo,R("div",wo,Pt(m.value)+" ",1)]),xo,(At(!0),Ot(ae,null,Pe(l.value,L=>(At(),Ot("div",{class:"row",key:L.id,style:{width:"80%"}},[R("div",bo,Pt(L.id),1),R("div",vo,[R("img",{src:L.image.current.thumbnail},null,8,Eo)]),R("div",_o,[R("button",{class:"link-button",onClick:Dt=>J(L)},Pt(L.title),9,So)])]))),128))])],64)}}});const Bo=cn(No,[["__scopeId","data-v-77f3015b"]]);export{Bo as default};
